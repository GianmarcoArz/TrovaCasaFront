<div class="container mt-5">
  <h1 class="text-center mb-4 animate__animated animate__fadeIn">Profilo</h1>
  <button class="btn btn-primary btn-lg d-block mx-auto mb-4 animate__animated animate__bounceIn" (click)="toggleForm()">Crea Annuncio Immobile</button>

  <div *ngIf="showForm" class="card p-4 mb-4 animate__animated animate__fadeIn">
    <form [formGroup]="immobileForm" (ngSubmit)="selectedImmobileId ? aggiornaImmobile() : creaAnnuncio()">
      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label for="titolo">Titolo</label>
            <input id="titolo" formControlName="titolo" class="form-control" />
          </div>
          <div class="form-group">
            <label for="descrizione">Descrizione</label>
            <input id="descrizione" formControlName="descrizione" class="form-control" />
          </div>
          <div class="form-group">
            <label for="prezzo">Prezzo</label>
            <input id="prezzo" formControlName="prezzo" type="number" class="form-control" />
          </div>
          <div class="form-group">
            <label for="metriQuadri">Metri Quadri</label>
            <input id="metriQuadri" formControlName="metriQuadri" type="number" class="form-control" />
          </div>
          <div class="form-group">
            <label for="numeroVani">Numero Vani</label>
            <input id="numeroVani" formControlName="numeroVani" type="number" class="form-control" />
          </div>
          <div class="form-group">
            <label for="piano">Piano</label>
            <input id="piano" formControlName="piano" type="number" class="form-control" />
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label for="via">Via</label>
            <input id="via" formControlName="via" class="form-control" />
          </div>
          <div class="form-group">
            <label for="civico">Civico</label>
            <input id="civico" formControlName="civico" type="number" class="form-control" />
          </div>
          <div class="form-group">
            <label for="comune">Comune</label>
            <input id="comune" formControlName="comune" class="form-control" />
          </div>
          <div class="form-group">
            <label for="provincia">Provincia</label>
            <input id="provincia" formControlName="provincia" class="form-control" />
          </div>
          <div class="form-group">
            <label for="statoImmobile">Stato Immobile</label>
            <select id="statoImmobile" formControlName="statoImmobile" class="form-control">
              <option value="NUOVO">Nuovo</option>
              <option value="USATO">Usato</option>
              <option value="RISTRUTTURATO">Ristrutturato</option>
              <option value="DA_RISTRUTTURARE">Da Ristrutturare</option>
            </select>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <div class="form-group form-check">
            <input id="postoAuto" formControlName="postoAuto" type="checkbox" class="form-check-input" />
            <label for="postoAuto" class="form-check-label">Posto Auto</label>
          </div>
          <div class="form-group form-check">
            <input id="giardino" formControlName="giardino" type="checkbox" class="form-check-input" />
            <label for="giardino" class="form-check-label">Giardino</label>
          </div>
          <div class="form-group form-check">
            <input id="terrazzo" formControlName="terrazzo" type="checkbox" class="form-check-input" />
            <label for="terrazzo" class="form-check-label">Terrazzo</label>
          </div>
          <div class="form-group form-check">
            <input id="ascensore" formControlName="ascensore" type="checkbox" class="form-check-input" />
            <label for="ascensore" class="form-check-label">Ascensore</label>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group form-check">
            <input id="cantina" formControlName="cantina" type="checkbox" class="form-check-input" />
            <label for="cantina" class="form-check-label">Cantina</label>
          </div>
          <div class="form-group form-check">
            <input id="riscaldamento" formControlName="riscaldamento" type="checkbox" class="form-check-input" />
            <label for="riscaldamento" class="form-check-label">Riscaldamento</label>
          </div>
          <div class="form-group form-check">
            <input id="climatizzazione" formControlName="climatizzazione" type="checkbox" class="form-check-input" />
            <label for="climatizzazione" class="form-check-label">Climatizzazione</label>
          </div>
          <div class="form-group form-check">
            <input id="allarme" formControlName="allarme" type="checkbox" class="form-check-input" />
            <label for="allarme" class="form-check-label">Allarme</label>
          </div>
          <div class="form-group form-check">
            <input id="sorveglianza" formControlName="sorveglianza" type="checkbox" class="form-check-input" />
            <label for="sorveglianza" class="form-check-label">Sorveglianza</label>
          </div>
        </div>
      </div>
      <button type="submit" class="btn btn-success btn-block mt-3">{{ selectedImmobileId ? 'Aggiorna' : 'Invia' }}</button>
    </form>
  </div>

  <h2 class="text-center mb-4 animate__animated animate__fadeIn">I tuoi immobili</h2>
  <div *ngIf="immobiliUser.length > 0; else noImmobili">
    <div *ngFor="let immobile of immobiliUser" class="card mb-4 animate__animated animate__fadeInUp">
      <div class="card-body">
        <h5 class="card-title">{{ immobile.titolo }}</h5>
        <p class="card-text">{{ immobile.descrizione }}</p>
        <p class="card-text"><strong>Prezzo:</strong> {{ immobile.prezzo }} €</p>
        <button class="btn btn-link" (click)="toggleDetails(immobile)">
          {{ immobile.expanded ? 'Mostra meno' : 'Mostra di più' }}
        </button>
        <button class="btn btn-primary" (click)="editImmobile(immobile)">Modifica</button>
        <div *ngIf="immobile.expanded" class="mt-3">
          <div class="row">
            <div class="col-md-6">
              <p class="card-text"><strong>Metri Quadri:</strong> {{ immobile.metriQuadri }}</p>
              <p class="card-text"><strong>Numero Vani:</strong> {{ immobile.numeroVani }}</p>
              <p class="card-text"><strong>Piano:</strong> {{ immobile.piano }}</p>
              <p class="card-text"><strong>Via:</strong> {{ immobile.via }}</p>
              <p class="card-text"><strong>Civico:</strong> {{ immobile.civico }}</p>
              <p class="card-text"><strong>Comune:</strong> {{ immobile.comune }}</p>
              <p class="card-text"><strong>Provincia:</strong> {{ immobile.provincia }}</p>
            </div>
            <div class="col-md-6">
              <p class="card-text"><strong>Posto Auto:</strong> {{ immobile.postoAuto ? 'Sì' : 'No' }}</p>
              <p class="card-text"><strong>Giardino:</strong> {{ immobile.giardino ? 'Sì' : 'No' }}</p>
              <p class="card-text"><strong>Terrazzo:</strong> {{ immobile.terrazzo ? 'Sì' : 'No' }}</p>
              <p class="card-text"><strong>Ascensore:</strong> {{ immobile.ascensore ? 'Sì' : 'No' }}</p>
              <p class="card-text"><strong>Cantina:</strong> {{ immobile.cantina ? 'Sì' : 'No' }}</p>
              <p class="card-text"><strong>Riscaldamento:</strong> {{ immobile.riscaldamento ? 'Sì' : 'No' }}</p>
              <p class="card-text"><strong>Climatizzazione:</strong> {{ immobile.climatizzazione ? 'Sì' : 'No' }}</p>
              <p class="card-text"><strong>Allarme:</strong> {{ immobile.allarme ? 'Sì' : 'No' }}</p>
              <p class="card-text"><strong>Sorveglianza:</strong> {{ immobile.sorveglianza ? 'Sì' : 'No' }}</p>
            </div>
          </div>
          <div class="image-gallery">
            <img *ngFor="let img of immobile.immagini" [src]="img.urlImmagine" class="image-thumbnail" />
          </div>
          <p class="card-text"><strong>Stato Immobile:</strong> {{ immobile.statoImmobile }}</p>
        </div>
      </div>
    </div>
  </div>
  <ng-template #noImmobili>
    <p class="text-center">Non hai immobili.</p>
  </ng-template>
</div>
